<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计算工具系列 —— Pyprocar库 | AH</title><meta name="author" content="炫酷老司机,andyhoo0716@gmail.com"><meta name="copyright" content="炫酷老司机"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Be lazy, stay efficient, and enjoy your coffee break!">
<meta property="og:type" content="article">
<meta property="og:title" content="计算工具系列 —— Pyprocar库">
<meta property="og:url" content="https://www.withox.cn/2024/06/20/Pyprocar-tutorial-1/index.html">
<meta property="og:site_name" content="AH">
<meta property="og:description" content="Be lazy, stay efficient, and enjoy your coffee break!">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.withox.cn/images/toolkit.png">
<meta property="article:published_time" content="2024-06-19T16:00:00.000Z">
<meta property="article:modified_time" content="2025-02-27T13:19:51.239Z">
<meta property="article:author" content="炫酷老司机">
<meta property="article:tag" content="VASP">
<meta property="article:tag" content="Pyprocar">
<meta property="article:tag" content="Band">
<meta property="article:tag" content="DOS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.withox.cn/images/toolkit.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "计算工具系列 —— Pyprocar库",
  "url": "https://www.withox.cn/2024/06/20/Pyprocar-tutorial-1/",
  "image": "https://www.withox.cn/images/toolkit.png",
  "datePublished": "2024-06-19T16:00:00.000Z",
  "dateModified": "2025-02-27T13:19:51.239Z",
  "author": [
    {
      "@type": "Person",
      "name": "炫酷老司机",
      "url": "https://www.withox.cn/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://www.withox.cn/2024/06/20/Pyprocar-tutorial-1/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":100,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算工具系列 —— Pyprocar库',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head><body><div id="web_bg" style="background-image: url(/img/background.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.ico" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa fa-graduation-cap"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-heart"></i><span> 爱好</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/game/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page child" href="/ride/"><i class="fa-fw fas fa-bicycle"></i><span> 骑行</span></a></li><li><a class="site-page child" href="/food/"><i class="fa-fw fas fa-utensils"></i><span> 美食</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">AH</span></a><a class="nav-page-title" href="/"><span class="site-name">计算工具系列 —— Pyprocar库</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa fa-graduation-cap"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-heart"></i><span> 爱好</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/game/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page child" href="/ride/"><i class="fa-fw fas fa-bicycle"></i><span> 骑行</span></a></li><li><a class="site-page child" href="/food/"><i class="fa-fw fas fa-utensils"></i><span> 美食</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">计算工具系列 —— Pyprocar库</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-19T16:00:00.000Z" title="发表于 2024-06-20 00:00:00">2024-06-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-02-27T13:19:51.239Z" title="更新于 2025-02-27 21:19:51">2025-02-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/toolkit/">toolkit</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><p><em><strong>¡Hola a todos!</strong></em></p>
<p>最近学习了一下<code>Pyprocar</code>的用法，分享一下使用心得。</p>
<p>对于老司机这种天生反骨的打工人，每天想的都是怎么偷懒，但是又想保住份工，就只能在效率上面想办法了，总之就是：</p>
<blockquote>
<p><strong>Be lazy, stay efficient, and enjoy your coffee break!</strong></p>
</blockquote>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>[官网](<a target="_blank" rel="noopener" href="https://romerogroup.github.io/pyprocar/">PyProcar — PyProcar 6.1.10 documentation (romerogroup.github.io)</a>)：</p>
<blockquote>
<p><em><strong>PyProcar is a robust, open-source Python library used for pre- and post-processing of the electronic structure data coming from DFT calculations. PyProcar provides a set of functions that manage data from the PROCAR format obtained from various DFT codes. Basically, the PROCAR file is a projection of the Kohn-Sham states over atomic orbitals. That projection is performed to every 𝑘-point in the considered mesh, every energy band and every atom. PyProcar is capable of performing a multitude of tasks including plotting plain and spin/atom/orbital projected band structures and Fermi surfaces- both in 2D and 3D, Fermi velocity plots, unfolding bands of a super cell, comparing band structures from multiple DFT calculations, plotting partial density of states and generating a 𝑘-path for a given crystal structure.</strong></em></p>
</blockquote>
<p>简而言之，自动出图，解放双手。而且对比其他后处理软件，老司机个人感觉<code>Pyprocar</code>出的图相对来说已经比较好看了，作为工作狗来说妥妥够用不需要二次处理了；放在顶刊文章里可能还需要再编辑下，不过还好<code>Pyprocar</code>提供了<code>matplotlib</code>再处理的功能，所以对图片要求更加高大上的也不用担心，再次编辑就行了。</p>
<h2 id="处理能带"><a href="#处理能带" class="headerlink" title="处理能带"></a>处理能带</h2><p>能带VASP计算流程参照参照<code>Learn VASP from pyamtgen</code>系列——<a target="_blank" rel="noopener" href="https://andyhox.github.io/2024/06/18/Learn-VASP-from-pymatgen-8/">Chap.8 计算小白硬学VASP —— 材料性质计算—&gt;能带计算 - A&amp;H (andyhox.github.io)</a>，直接处理案例的数据。</p>
<h3 id="Pyprocar后处理"><a href="#Pyprocar后处理" class="headerlink" title="Pyprocar后处理"></a>Pyprocar后处理</h3><h4 id="普通能带"><a href="#普通能带" class="headerlink" title="普通能带"></a>普通能带</h4><p><code>Pyprocar</code>的代码非常简单，只需要简单设置就可以得到基本的能带图，主要用到的方法为<code>pyprocar.bandsplot</code>。</p>
<p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">vasprun = Vasprun(<span class="string">'./ZrNiSn_primitive/band/vasprun.xml'</span>)</span><br><span class="line"><span class="comment"># 获取费米能级</span></span><br><span class="line">efermi=vasprun.efermi</span><br><span class="line"><span class="comment"># 打印gap信息</span></span><br><span class="line"><span class="built_in">print</span>(vasprun.get_band_structure().get_band_gap())</span><br><span class="line"></span><br><span class="line">band_dir = <span class="string">'./ZrNiSn_primitive/band'</span></span><br><span class="line"><span class="comment"># pyprocar设置</span></span><br><span class="line">pyprocar.bandsplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,		<span class="comment"># 定义计算类型，默认为’vasp'</span></span><br><span class="line">    dirname=band_dir,	<span class="comment"># 指定文件路径，程序会自动读取对应文件</span></span><br><span class="line">    mode=<span class="string">'plain'</span>,		<span class="comment"># 处理模式，'plain'为绘制普通band</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p>首先调用<code>pymatgen</code>会输出gap信息：</p>
<blockquote>
<p><em><strong>{‘direct’: False, ‘energy’: 0.5058999999999987, ‘transition’: ‘GAMMA-X’}</strong></em></p>
</blockquote>
<p>结构为间接半导体，<strong>VBM→CBM</strong>方向为：<strong>GAMMA→X</strong>，禁带宽度为：<strong>0.5 eV</strong></p>
<p>默认参数输出的能带图：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240620123342020.png" alt="image-20240620123342020"></p>
<p>ok，此时的能带图初见轮廓但是不利于分析。默认参数下没有平移费米能级至0，已经选择合适的energy interval，所以我们需要优化一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">vasprun = Vasprun(<span class="string">'./ZrNiSn_primitive/band/vasprun.xml'</span>)</span><br><span class="line"><span class="comment"># 获取费米能级</span></span><br><span class="line">efermi=vasprun.efermi</span><br><span class="line"><span class="comment"># 打印gap信息</span></span><br><span class="line"><span class="built_in">print</span>(vasprun.get_band_structure().get_band_gap())</span><br><span class="line"></span><br><span class="line">band_dir = <span class="string">'./ZrNiSn_primitive/band'</span></span><br><span class="line"><span class="comment"># pyprocar设置</span></span><br><span class="line">pyprocar.bandsplot(</span><br><span class="line">    <span class="comment"># 源参数</span></span><br><span class="line">    code=<span class="string">'vasp'</span>,		<span class="comment"># 定义计算类型，默认为’vasp'</span></span><br><span class="line">    dirname=band_dir,	<span class="comment"># 指定文件路径，程序会自动读取对应文件</span></span><br><span class="line">    mode=<span class="string">'plain'</span>,		<span class="comment"># 处理模式，'plain'为绘制普通band</span></span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],		<span class="comment"># 指定Energy interval</span></span><br><span class="line">    fermi=efermi,		<span class="comment"># 提供费米能级，参数中提供费米能级后，默认会平移至0</span></span><br><span class="line">    <span class="comment"># 绘图参数</span></span><br><span class="line">    linewidth=[<span class="number">2</span>],		<span class="comment"># 曲线宽度</span></span><br><span class="line">    fermi_linewidth=<span class="number">2</span>	<span class="comment"># 费米能级参考线线宽</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>运行：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240620124055490.png" alt="image-20240620124055490"></p>
<p>针对上述图片，我们增加了源参数：</p>
<ul>
<li><p><code>elimit</code>：控制纵坐标能量范围；</p>
</li>
<li><p><code>fermi</code>：提供费米能级</p>
</li>
</ul>
<p>源参数即<code>pyprocar.bandsplot</code>读取后输出对应的图，具体参数即含义可[参考文档](<a target="_blank" rel="noopener" href="https://romerogroup.github.io/pyprocar/index.html">PyProcar — PyProcar 6.1.10 documentation (romerogroup.github.io)</a>)。参数有很多，但是实际操作中只需要设置几个参数就可以得到非常好的图了。</p>
<p>绘图参数是在此基础上调整图片的线宽，字体大小等，同样也只需要设置有限个参数就可以得到很好的图片了。</p>
<mark class="hl-label blue">绘图参数</mark>

<blockquote>
<p>spin_colors : {‘description’: ‘The colors for the plot lines.’, ‘value’: [‘blue’, ‘red’]}</p>
<p>color : {‘description’: ‘The colors for the plot lines.’, ‘value’: ‘black’}</p>
<p>colorbar_title : {‘description’: ‘Title of the colorbar.’, ‘value’: ‘Atomic Orbital Projections’}</p>
<p>colorbar_title_size : {‘description’: ‘Font size of the title of the colorbar.’, ‘value’: 15}</p>
<p>colorbar_title_padding : {‘description’: ‘Padding of the title of the colorbar.’, ‘value’: 20}</p>
<p>colorbar_tick_labelsize : {‘description’: ‘Size of the title of the colorbar ticks’, ‘value’: 10}</p>
<p>cmap : {‘description’: ‘The colormap used for the plot.’, ‘value’: ‘jet’}</p>
<p>clim : {‘description’: ‘The color scale for the color bar’, ‘value’: [None, None]}</p>
<p>fermi_color : {‘description’: ‘The color of the Fermi line.’, ‘value’: ‘blue’}</p>
<p>fermi_linestyle : {‘description’: ‘The linestyle of the Fermi line.’, ‘value’: ‘dotted’}</p>
<p>fermi_linewidth : {‘description’: ‘The linewidth of the Fermi line.’, ‘value’: 1}</p>
<p>grid : {‘description’: ‘If true, a grid will be shown on the plot.’, ‘value’: False}</p>
<p>grid_axis : {‘description’: ‘Which axis (or both) the grid lines should be drawn on.’, ‘value’: ‘both’}</p>
<p>grid_color : {‘description’: ‘The color of the grid lines.’, ‘value’: ‘grey’}</p>
<p>grid_linestyle : {‘description’: ‘The linestyle of the grid lines.’, ‘value’: ‘solid’}</p>
<p>grid_linewidth : {‘description’: ‘The linewidth of the grid lines.’, ‘value’: 1}</p>
<p>grid_which : {‘description’: ‘Which grid lines to draw (major, minor or both).’, ‘value’: ‘major’}</p>
<p>label : {‘description’: ‘The labels for the plot lines.’, ‘value’: [‘<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.437ex;" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="2.007ex" role="img" focusable="false" viewbox="0 -694 500 887"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2191" d="M27 414Q17 414 17 433Q17 437 17 439T17 444T19 447T20 450T22 452T26 453T30 454T36 456Q80 467 120 494T180 549Q227 607 238 678Q240 694 251 694Q259 694 261 684Q261 677 265 659T284 608T320 549Q340 525 363 507T405 479T440 463T467 455T479 451Q483 447 483 433Q483 413 472 413Q467 413 458 416Q342 448 277 545L270 555V-179Q262 -193 252 -193H250H248Q236 -193 230 -179V555L223 545Q192 499 146 467T70 424T27 414Z"/></g></g></g></svg></mjx-container>’, ‘<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="2.009ex" role="img" focusable="false" viewbox="0 -694 500 888"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2193" d="M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z"/></g></g></g></svg></mjx-container>’]}</p>
<p>legend : {‘description’: ‘If true, a legend will be shown on the plot.’, ‘value’: True}</p>
<p>linestyle : {‘description’: ‘The linestyles for the plot lines.’, ‘value’: [‘solid’, ‘dashed’]}</p>
<p>linewidth : {‘description’: ‘The linewidths for the plot lines.’, ‘value’: [1.0, 1.0]}</p>
<p>marker : {‘description’: ‘The marker styles for the plot points.’, ‘value’: [‘o’, ‘v’, ‘^’, ‘D’]}</p>
<p>markersize : {‘description’: ‘The size of the markers for the plot points.’, ‘value’: [0.2, 0.2]}</p>
<p>opacity : {‘description’: ‘The opacities for the plot lines.’, ‘value’: [1.0, 1.0]}</p>
<p>plot_color_bar : {‘description’: ‘If true, a color bar will be shown on the plot.’, ‘value’: True}</p>
<p>savefig : {‘description’: ‘The file name to save the figure. If null, the figure will not be saved.’, ‘value’: None}</p>
<p>title : {‘description’: ‘The title for the plot. If null, no title will be displayed.’, ‘value’: None}</p>
<p>weighted_color : {‘description’: ‘If true, the color of the lines will be weighted.’, ‘value’: True}</p>
<p>weighted_width : {‘description’: ‘If true, the width of the lines will be weighted.’, ‘value’: False}</p>
<p>figure_size : {‘description’: ‘The size of the figure (width, height) in inches.’, ‘value’: [9, 6]}</p>
<p>dpi : {‘description’: “The resolution in dots per inch. If ‘figure’, use the figure’s dpi value.”, ‘value’: ‘figure’}</p>
</blockquote>
<h4 id="轨道投影能带图"><a href="#轨道投影能带图" class="headerlink" title="轨道投影能带图"></a>轨道投影能带图</h4><h5 id="线性"><a href="#线性" class="headerlink" title="线性"></a>线性</h5><p><code>LORBIT</code>设置成12的话，轨道的分类如下：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/orbitals.png" alt="orbitals"></p>
<p>此时<code>pyprocar.bandsplot</code>中设置<code>mode=parametric</code>，同时也需要指定轨道：</p>
<ul>
<li><code>orbitals=[1]</code>：只分析<code>py</code>亚轨道；</li>
<li><code>orbitals=[1,2,3]</code>：分析全部p轨道;</li>
<li>以此类推……</li>
</ul>
<p>下面为primtive_cell的结果：</p>
<div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">s轨道</button><button type="button" class="tab">p轨道</button><button type="button" class="tab">d轨道</button></div><div class="tab-contents"><div class="tab-item-content active"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">vasprun = Vasprun(<span class="string">'./ZrNiSn_primitive/band/vasprun.xml'</span>)</span><br><span class="line">efermi = vasprun.efermi</span><br><span class="line"></span><br><span class="line">band_dir = <span class="string">'./ZrNiSn_primitive/band'</span></span><br><span class="line"></span><br><span class="line">pyprocar.bandsplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    dirname=band_dir,</span><br><span class="line">    mode=<span class="string">'parametric'</span>,</span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    orbitals=[<span class="number">0</span>],   <span class="comment"># s轨道</span></span><br><span class="line">    fermi=efermi,</span><br><span class="line">    clim=[<span class="number">0</span>,<span class="number">1</span>],		<span class="comment"># color bar的刻度</span></span><br><span class="line">    linewidth=[<span class="number">2</span>],</span><br><span class="line">    fermi_linewidth=<span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240620142112989.png" alt="image-20240620142112989"></p></div><div class="tab-item-content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">vasprun = Vasprun(<span class="string">'./ZrNiSn_primitive/band/vasprun.xml'</span>)</span><br><span class="line">efermi = vasprun.efermi</span><br><span class="line"></span><br><span class="line">band_dir = <span class="string">'./ZrNiSn_primitive/band'</span></span><br><span class="line"></span><br><span class="line">pyprocar.bandsplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    dirname=band_dir,</span><br><span class="line">    mode=<span class="string">'parametric'</span>,</span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    orbitals=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],   <span class="comment"># p轨道</span></span><br><span class="line">    fermi=efermi,</span><br><span class="line">    clim=[<span class="number">0</span>,<span class="number">1</span>],			<span class="comment"># color bar的刻度</span></span><br><span class="line">    linewidth=[<span class="number">2</span>],</span><br><span class="line">    fermi_linewidth=<span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240620142145114.png" alt="image-20240620142145114"></p></div><div class="tab-item-content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">vasprun = Vasprun(<span class="string">'./ZrNiSn_primitive/band/vasprun.xml'</span>)</span><br><span class="line">efermi = vasprun.efermi</span><br><span class="line"></span><br><span class="line">band_dir = <span class="string">'./ZrNiSn_primitive/band'</span></span><br><span class="line"></span><br><span class="line">pyprocar.bandsplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    dirname=band_dir,</span><br><span class="line">    mode=<span class="string">'parametric'</span>,</span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    orbitals=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>],   <span class="comment"># d轨道</span></span><br><span class="line">    fermi=efermi,</span><br><span class="line">    clim=[<span class="number">0</span>,<span class="number">1</span>],				<span class="comment"># color bar的刻度</span></span><br><span class="line">    linewidth=[<span class="number">2</span>],</span><br><span class="line">    fermi_linewidth=<span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240620142220215.png" alt="image-20240620142220215"></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>

<p>如果是对于自旋体系，在源参数中增加<code>spins</code>即可控制绘图考虑的自旋方向：</p>
<ul>
<li><code>spins=[0]</code>：绘制spin up</li>
<li><code>spins=[1]</code>：绘制spin down</li>
<li><code>spins=[0,1]</code>：同时绘制spin up &amp; spin down</li>
</ul>
<p>老司机这里计算的时候把自旋关了，所以输出也就只有一条，不用额外设置。</p>
<p>除此之外，还可以输出原子的贡献，操作就是把<code>oribitals</code>换成<code>atoms</code>，如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">vasprun = Vasprun(<span class="string">'./ZrNiSn_primitive/band/vasprun.xml'</span>)</span><br><span class="line">efermi = vasprun.efermi</span><br><span class="line"></span><br><span class="line">band_dir = <span class="string">'./ZrNiSn_primitive/band'</span></span><br><span class="line"></span><br><span class="line">pyprocar.bandsplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    dirname=band_dir,</span><br><span class="line">    mode=<span class="string">'parametric'</span>,</span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    atoms=[<span class="number">0</span>],   			<span class="comment"># 1号原子贡献</span></span><br><span class="line">    fermi=efermi,</span><br><span class="line">    clim=[<span class="number">0</span>,<span class="number">1</span>],				<span class="comment"># color bar的刻度</span></span><br><span class="line">    linewidth=[<span class="number">2</span>],</span><br><span class="line">    fermi_linewidth=<span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240620143531454.png" alt="image-20240620143531454"></p>
<p>如果想得到某一元素的贡献，只需要在<code>atoms=[]</code>中包含同一元素原子所有的序号即可，上面计算用到的primtive cell中每个元素只有一个原子，即上图为<code>Zr</code>元素的贡献。</p>
<h5 id="散点"><a href="#散点" class="headerlink" title="散点"></a>散点</h5><p>还可以用散点来表示，差别只是把<code>mode='parametric</code>‘换成<code>mode='scatter'</code>，其余设置一样，如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">vasprun = Vasprun(<span class="string">'./ZrNiSn_primitive/band/vasprun.xml'</span>)</span><br><span class="line">efermi = vasprun.efermi</span><br><span class="line"></span><br><span class="line">band_dir = <span class="string">'./ZrNiSn_primitive/band'</span></span><br><span class="line"></span><br><span class="line">pyprocar.bandsplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    dirname=band_dir,</span><br><span class="line">    mode=<span class="string">'scatter'</span>,</span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    atoms=[<span class="number">0</span>],   			<span class="comment"># 1号原子贡献</span></span><br><span class="line">    fermi=efermi,</span><br><span class="line">    clim=[<span class="number">0</span>,<span class="number">1</span>],				<span class="comment"># color bar的刻度</span></span><br><span class="line">    markersize=[<span class="number">60</span>],		<span class="comment"># 调整散点大小</span></span><br><span class="line">    fermi_linewidth=<span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240620144303956.png" alt="image-20240620144303956"></p>
<h2 id="处理态密度"><a href="#处理态密度" class="headerlink" title="处理态密度"></a>处理态密度</h2><p>态密度的处理方法与能带类似，使用<code>pyprocar.dosplot</code>，VASP计算流程参照<code>Learn VASP from pyamtgen</code>系列——<a target="_blank" rel="noopener" href="https://andyhox.github.io/2024/06/11/Learn-VASP-from-pymatgen-5/">Chap.5 计算小白硬学VASP —— 材料性质计算—&gt;态密度 - A&amp;H (andyhox.github.io)</a>。</p>
<p>直接接着后处理上文<code>ZrNiSn</code>结构的态密度。</p>
<h3 id="Pyrocar-后处理"><a href="#Pyrocar-后处理" class="headerlink" title="Pyrocar 后处理"></a>Pyrocar 后处理</h3><h4 id="总态密度TDOS"><a href="#总态密度TDOS" class="headerlink" title="总态密度TDOS"></a>总态密度TDOS</h4><p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"><span class="keyword">from</span> pymatgen.core.structure <span class="keyword">import</span> Structure</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">prim_dos_vrun = Vasprun(<span class="string">"./ZrNiSn_primitive/dos/vasprun.xml"</span>)</span><br><span class="line">prim_efermi = prim_dos_vrun.efermi</span><br><span class="line"></span><br><span class="line">prim_dos = pyprocar.dosplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    mode=<span class="string">'plain'</span>,</span><br><span class="line">    dirname=<span class="string">'ZrNiSn_primitive/dos'</span>,</span><br><span class="line">    fermi=prim_efermi,</span><br><span class="line">    elimit=[-<span class="number">5</span>,<span class="number">5</span>],</span><br><span class="line">    dos_limit=[<span class="number">0</span>,<span class="number">50</span>],</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240626154522277.png" alt="image-20240626154522277"></p>
<p>上述案例没有考虑<code>ISPIN</code>，故只显示一个方向。</p>
<h4 id="分态密度PDOS"><a href="#分态密度PDOS" class="headerlink" title="分态密度PDOS"></a>分态密度PDOS</h4><h5 id="指定元素和轨道"><a href="#指定元素和轨道" class="headerlink" title="指定元素和轨道"></a>指定元素和轨道</h5><p>这里可以绘制<code>ZrNiSn</code>中Zr-d、Ni-d、Sn-sp轨道，此时用到<code>mode=overlay</code>，同时也需要设置<code>items</code>指定元素及轨道。代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"><span class="keyword">from</span> pymatgen.core.structure <span class="keyword">import</span> Structure</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">prim_dos_vrun = Vasprun(<span class="string">"./ZrNiSn_primitive/dos/vasprun.xml"</span>)</span><br><span class="line">prim_efermi = prim_dos_vrun.efermi</span><br><span class="line"></span><br><span class="line"><span class="comment"># primtive_cell</span></span><br><span class="line"></span><br><span class="line">prim_dos = pyprocar.dosplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    mode=<span class="string">'overlay'</span>,</span><br><span class="line">    dirname=<span class="string">'ZrNiSn_primitive/dos'</span>,</span><br><span class="line">    fermi=prim_efermi,</span><br><span class="line">    items=<span class="built_in">dict</span>(Zr=(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>),Ni=(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>),Sn=(<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)),</span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    dos_limit=[<span class="number">0</span>,<span class="number">50</span>],</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240626155508247.png" alt="image-20240626155508247"></p>
<h5 id="分析指定原子的PDOS"><a href="#分析指定原子的PDOS" class="headerlink" title="分析指定原子的PDOS"></a>分析指定原子的PDOS</h5><p>如果需要分析指定编号单个原子或多个原子的PDOS，可以采用<code>mode=overlay_orbitals</code>方法，此时只需要指定<code>atoms</code>对应的原子序号列表，如这里分析Zr+Ni的PDOS。代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"><span class="keyword">from</span> pymatgen.core.structure <span class="keyword">import</span> Structure</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">prim_dos_vrun = Vasprun(<span class="string">"./ZrNiSn_primitive/dos/vasprun.xml"</span>)</span><br><span class="line">prim_efermi = prim_dos_vrun.efermi</span><br><span class="line"></span><br><span class="line"><span class="comment"># primtive_cell</span></span><br><span class="line"></span><br><span class="line">prim_dos = pyprocar.dosplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    mode=<span class="string">'overlay_orbitals'</span>,</span><br><span class="line">    dirname=<span class="string">'ZrNiSn_primitive/dos'</span>,</span><br><span class="line">    fermi=prim_efermi,</span><br><span class="line">    atoms=[<span class="number">0</span>,<span class="number">1</span>],</span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    dos_limit=[<span class="number">0</span>,<span class="number">50</span>],</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240626161041969.png" alt="image-20240626161041969"></p>
<h5 id="指定所有元素同一个轨道"><a href="#指定所有元素同一个轨道" class="headerlink" title="指定所有元素同一个轨道"></a>指定所有元素同一个轨道</h5><p>如果对于给定的体系需要分析所有元素的同一个轨道，比如过渡金属高熵合金只看d轨道的话，可以采用<code>mode=overlay_species</code>，且只需要指定<code>orbitals</code>即可。代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"><span class="keyword">from</span> pymatgen.core.structure <span class="keyword">import</span> Structure</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">prim_dos_vrun = Vasprun(<span class="string">"./ZrNiSn_primitive/dos/vasprun.xml"</span>)</span><br><span class="line">prim_efermi = prim_dos_vrun.efermi</span><br><span class="line"></span><br><span class="line"><span class="comment"># primtive_cell</span></span><br><span class="line"></span><br><span class="line">prim_dos = pyprocar.dosplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    mode=<span class="string">'overlay_species'</span>,</span><br><span class="line">    dirname=<span class="string">'ZrNiSn_primitive/dos'</span>,</span><br><span class="line">    fermi=prim_efermi,</span><br><span class="line">    orbitals=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>],</span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    dos_limit=[<span class="number">0</span>,<span class="number">50</span>],</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240626160253746.png" alt="image-20240626160253746"></p>
<p>初次之外，图片还可以垂直的方式输出，只需要添加<code>orientation='vertical'</code>，如上述代码改为垂直输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"><span class="keyword">from</span> pymatgen.core.structure <span class="keyword">import</span> Structure</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">prim_dos_vrun = Vasprun(<span class="string">"./ZrNiSn_primitive/dos/vasprun.xml"</span>)</span><br><span class="line">prim_efermi = prim_dos_vrun.efermi</span><br><span class="line"></span><br><span class="line"><span class="comment"># primtive_cell</span></span><br><span class="line"></span><br><span class="line">prim_dos = pyprocar.dosplot(</span><br><span class="line">    code=<span class="string">'vasp'</span>,</span><br><span class="line">    mode=<span class="string">'overlay_species'</span>,</span><br><span class="line">    orientation=<span class="string">'vertical'</span>,</span><br><span class="line">    dirname=<span class="string">'ZrNiSn_primitive/dos'</span>,</span><br><span class="line">    fermi=prim_efermi,</span><br><span class="line">    orbitals=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>],</span><br><span class="line">    elimit=[-<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    dos_limit=[<span class="number">0</span>,<span class="number">50</span>],</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240626161701325.png" alt="image-20240626161701325"></p>
<h2 id="同时绘制能带态密度"><a href="#同时绘制能带态密度" class="headerlink" title="同时绘制能带态密度"></a>同时绘制能带态密度</h2><p>用到<code>pyprocar.bandsdosplot</code>方法，只需要分别设置<code>band</code>和<code>dos</code>的参数，然后用<code>bandsdosplot</code>组合在一起即可，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyprocar</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Vasprun</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取vasprun.xml文件</span></span><br><span class="line">prim_dos_vrun = Vasprun(<span class="string">"./ZrNiSn_primitive/dos/vasprun.xml"</span>)</span><br><span class="line">prim_efermi = prim_dos_vrun.efermi</span><br><span class="line"></span><br><span class="line">bands_settings = {</span><br><span class="line">                  <span class="string">'mode'</span>:<span class="string">'plain'</span>,</span><br><span class="line">                  <span class="string">'fermi'</span>:prim_efermi, </span><br><span class="line">                  <span class="string">'dirname'</span>: bands_dir</span><br><span class="line">                  }</span><br><span class="line"></span><br><span class="line">dos_settings = {</span><br><span class="line">               <span class="string">'mode'</span>:<span class="string">'plain'</span>,</span><br><span class="line">               <span class="string">'fermi'</span>:prim_efermi,   </span><br><span class="line">               <span class="string">'dirname'</span>: dos_dir</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">pyprocar.bandsdosplot(code=<span class="string">'vasp'</span>,</span><br><span class="line">                bands_settings=bands_settings,</span><br><span class="line">                dos_settings=dos_settings,</span><br><span class="line">                )</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行代码：</p>
<p><img src="/2024/06/20/Pyprocar-tutorial-1/image-20240626170909285.png" alt="image-20240626170909285"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>Pyprocar</code>的用法就介绍到这，欢迎补充！</p>
<p><em><strong>¡Muchas gracias!</strong></em></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.withox.cn">炫酷老司机</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.withox.cn/2024/06/20/Pyprocar-tutorial-1/">https://www.withox.cn/2024/06/20/Pyprocar-tutorial-1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://www.withox.cn" target="_blank">AH</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/VASP/">VASP</a><a class="post-meta__tags" href="/tags/Pyprocar/">Pyprocar</a><a class="post-meta__tags" href="/tags/Band/">Band</a><a class="post-meta__tags" href="/tags/DOS/">DOS</a></div><div class="post-share"><div class="social-share" data-image="/images/toolkit.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/06/18/Learn-VASP-from-pymatgen-8/" title="Chap.8  计算小白硬学VASP —— 材料性质计算—&gt;能带计算"><img class="cover" src="/images/wallhaven-gpkd77_3840x2160.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Chap.8  计算小白硬学VASP —— 材料性质计算—>能带计算</div></div><div class="info-2"><div class="info-item-1">¡Hola a todos! 本章介绍如何计算能带结构，VASP计算流程代码如下： 下载结构结构优化自洽计算能带计算1234567891011from mp_api.client import MPResterapi_key = &#x27;your key&#x27;with MPRester(api_key) as mpr:    # 获取结构    structure = mpr.get_structure_by_material_id(&#x27;mp-924129&#x27;)    # 转化成原胞    primtive_structure = structure.get_primitive_structure()    # 保存结构    primtive_structure.to(filename=&#x27;ZrNiSn_primitive.cif&#x27;)123456789101112131415161718192021from pymatgen.io.vasp.sets import MPRelaxSetfrom...</div></div></div></a><a class="pagination-related" href="/2024/06/27/Learn-VASP-from-pymatgen-9/" title="Chap.9  计算小白硬学VASP —— 材料性质计算—&gt;能带分析"><img class="cover" src="/images/wallhaven-gpkd77_3840x2160.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Chap.9  计算小白硬学VASP —— 材料性质计算—>能带分析</div></div><div class="info-2"><div class="info-item-1">¡Hola a todos! 本章介绍如何分析能带计算结果。 导出gap&#x2F;CBM&#x2F;VBM信息能带计算完后，直接读取vasprun.xml文件，可以最快的得到禁带宽度、CBM&#x2F;VBM的数值，以及半导体种类（直接带隙&#x2F;间接带隙）。代码如下： 123456789101112131415from pymatgen.io.vasp.outputs import Vasprunimport pandas as pd# 读vasprun.xml文件vasprun = Vasprun(&quot;../ZrNiSn_primitive/band/vasprun.xml&quot;)# 获取gap/vbm/cbmbandgap_dict = vasprun.get_band_structure().get_band_gap()vbm = vasprun.get_band_structure().get_vbm()[&quot;energy&quot;]cbm =...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/11/08/Atomate2-1/" title="计算工作流——初识Atomate2"><img class="cover" src="/images/toolkit.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-08</div><div class="info-item-2">计算工作流——初识Atomate2</div></div><div class="info-2"><div class="info-item-1">Atomate2 ​是一款开源可用来处理复杂庞大计算任务的软件包，开发团队也是大名鼎鼎的劳伦斯伯克利国家实验室的研究人员，耳熟能详的 pymatgen​、Materials Project​、FireWorks ​等也是出自该团队之手。 Atomate2 ​环境配置可参考官网进行。 在此之前，强烈建议先了解学习一下 pymatgen ​的用法！老司机之前也出过相关介绍。如果在此之前有了解过或使用过 pymatgen ​的朋友，那么 Atomate2 ​使用起来应该会更加容易上手，而且用习惯之后，发现 Atomate2 ​用起来更加顺手。下面先贴一个官网上的例子： 123456789101112131415from atomate2.vasp.jobs.core import RelaxMakerfrom jobflow.managers.local import run_locallyfrom pymatgen.core.structure import Structuresi_structure = Structure(    lattice=[[0, 2.73,...</div></div></div></a><a class="pagination-related" href="/2024/11/09/Atomate2-2/" title="计算工作流——Atomate2基本设置"><img class="cover" src="/images/toolkit.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-09</div><div class="info-item-2">计算工作流——Atomate2基本设置</div></div><div class="info-2"><div class="info-item-1">Atomate2​安装过程官网上介绍的已经非常详细了，唯一需要注意的是云数据库的设置。Atomate2​推荐采用云数据库来存储工作量计算结果，官网给出的例子为使用Mongdb Atlas​。但是由于一些原因，采用云数据库来储存数据，对于个人用户来说不是很友好，特别是国内用户：  由于“局域网”问题，许多集群可能连接不上Mongdb Atlas​，或者速度比较慢，容易掉线； 云数据库要花钱购买存储空间，Mongdb Atlas​也只提供500M的免费空间，长期来看也是不够用的，不管你是学生还是社畜，咱自己总不能倒贴上班吧； 小批量计算没有这个必要，个人用户自己计算的东西，体量实在太小，没必要纠结于按照官网教程来配置数据库，我们主要是使用Atomate2​方便的工作流。  Note：...</div></div></div></a><a class="pagination-related" href="/2024/11/10/Atomate2-3/" title="计算工作流——Atomate2自定义工作流"><img class="cover" src="/images/toolkit.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-10</div><div class="info-item-2">计算工作流——Atomate2自定义工作流</div></div><div class="info-2"><div class="info-item-1">Atomate2​除了直接调用现成的工作流，我们还可以根据个人需求自定义任务个数以及工作流走向。具体操作也非常简单，只需要在Flow​中按照计算顺序传入任务即可，如果我们需要优化一个结构并进行静态计算： 12345678910111213141516171819from jobflow import Flowfrom atomate2.vasp.jobs.core import RelaxMaker, StaticMakerfrom pymatgen.core.structure import Structuresi_structure = Structure.from_file(&quot;Si.cif&quot;)# create a relax jobrelax_job = RelaxMaker().make(structure=si_structure)# create a static job that will use only the structure from the relaxationstatic_job =...</div></div></div></a><a class="pagination-related" href="/2024/05/29/Learn-VASP-from-pymatgen-1/" title="Chap.1  计算小白硬学VASP —— 前言"><img class="cover" src="/images/wallhaven-gpkd77_3840x2160.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-29</div><div class="info-item-2">Chap.1  计算小白硬学VASP —— 前言</div></div><div class="info-2"><div class="info-item-1">¡Hola a todos! 我是炫酷老司机，欢迎来到《计算小白硬学VASP》系列。 本系列不涉及DFT理论！不涉及DFT理论！不涉及DFT理论！主要目的是通过实例学习如何让VASP跑起来，不需要记INCAR, POTCAR, KPOINTS, POSCAR, CONTCAR等各种文件。 配合上好大哥——pymatgen，实现各种计算类型输入文件生成脚本化，计算流程以及计算结果处理自动化，尽可能解放双手，告别vim。 本人非大佬，普通DFT民工一名，不涉及教学，只分享经验，欢迎指正，不喜勿喷，共同进步。 ¡Muchas gracias! </div></div></div></a><a class="pagination-related" href="/2024/08/05/Learn-VASP-from-pymatgen-11/" title="Chap.11  计算小白硬学VASP —— 构建slab模型"><img class="cover" src="/images/wallhaven-gpkd77_3840x2160.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-05</div><div class="info-item-2">Chap.11  计算小白硬学VASP —— 构建slab模型</div></div><div class="info-2"><div class="info-item-1">¡Hola a todos! 本章介绍如何构建slab模型。 首先切面用到的miller index针对的是bulk模型的惯用胞（conventional cell）而不是原胞（primtive cell），这与之前计算能带是刚好相反的。 所以，在进行切面操作时，要确保你的bulk模型是惯用胞，可以用pymatgen的功能来帮助实现。  直接从Materials project下载结构  如果是从MP上下载结构，我们需要把conventional_cell = True打开： 1234567from mp_api.client import MPResterapi_key = &quot;your key&quot;with MPRester(api_key) as mpr:    Si = mpr.get_structure_by_material_id(&quot;mp-149&quot;,conventional_unit_cell=True)   ...</div></div></div></a><a class="pagination-related" href="/2024/08/06/Learn-VASP-from-pymatgen-12/" title="Chap.12  计算小白硬学VASP —— 构建异质结模型"><img class="cover" src="/images/wallhaven-gpkd77_3840x2160.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-06</div><div class="info-item-2">Chap.12  计算小白硬学VASP —— 构建异质结模型</div></div><div class="info-2"><div class="info-item-1">¡Hola a todos! 本章介绍如何自动构建异质结模型。 CoherentInterfaceBuilder &amp; ZSLGeneratorpymatgen中自动构建异质结模型需要调用CoherentInterfaceBuilder和ZSLGenerator。其中前者是用于生成interfaces，而后者主要是用于定义晶面的匹配度。导入方法为： 12from pymatgen.analysis.interfaces.coherent_interfaces import CoherentInterfaceBuilderfrom pymatgen.analysis.interfaces.zsl import ZSLGenerator  首先介绍ZSLGenerator，原理见：Lattice match: An application to...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.ico" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">炫酷老司机</div><div class="author-info-description">因为太懒，所以懒得写</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E8%83%BD%E5%B8%A6"><span class="toc-number">2.</span> <span class="toc-text">处理能带</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Pyprocar%E5%90%8E%E5%A4%84%E7%90%86"><span class="toc-number">2.1.</span> <span class="toc-text">Pyprocar后处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E8%83%BD%E5%B8%A6"><span class="toc-number">2.1.1.</span> <span class="toc-text">普通能带</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%A8%E9%81%93%E6%8A%95%E5%BD%B1%E8%83%BD%E5%B8%A6%E5%9B%BE"><span class="toc-number">2.1.2.</span> <span class="toc-text">轨道投影能带图</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%BF%E6%80%A7"><span class="toc-number">2.1.2.1.</span> <span class="toc-text">线性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%A3%E7%82%B9"><span class="toc-number">2.1.2.2.</span> <span class="toc-text">散点</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%80%81%E5%AF%86%E5%BA%A6"><span class="toc-number">3.</span> <span class="toc-text">处理态密度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Pyrocar-%E5%90%8E%E5%A4%84%E7%90%86"><span class="toc-number">3.1.</span> <span class="toc-text">Pyrocar 后处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E6%80%81%E5%AF%86%E5%BA%A6TDOS"><span class="toc-number">3.1.1.</span> <span class="toc-text">总态密度TDOS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%80%81%E5%AF%86%E5%BA%A6PDOS"><span class="toc-number">3.1.2.</span> <span class="toc-text">分态密度PDOS</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%85%83%E7%B4%A0%E5%92%8C%E8%BD%A8%E9%81%93"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">指定元素和轨道</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E6%8C%87%E5%AE%9A%E5%8E%9F%E5%AD%90%E7%9A%84PDOS"><span class="toc-number">3.1.2.2.</span> <span class="toc-text">分析指定原子的PDOS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0%E5%90%8C%E4%B8%80%E4%B8%AA%E8%BD%A8%E9%81%93"><span class="toc-number">3.1.2.3.</span> <span class="toc-text">指定所有元素同一个轨道</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E7%BB%98%E5%88%B6%E8%83%BD%E5%B8%A6%E6%80%81%E5%AF%86%E5%BA%A6"><span class="toc-number">4.</span> <span class="toc-text">同时绘制能带态密度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">5.</span> <span class="toc-text">总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/02/28/FireWorks-intro/" title="FireWorks——材料计算工作流的归属？"><img src="/images/imgtop.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FireWorks——材料计算工作流的归属？"/></a><div class="content"><a class="title" href="/2025/02/28/FireWorks-intro/" title="FireWorks——材料计算工作流的归属？">FireWorks——材料计算工作流的归属？</a><time datetime="2025-02-28T09:49:13.000Z" title="发表于 2025-02-28 17:49:13">2025-02-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/10/Atomate2-3/" title="计算工作流——Atomate2自定义工作流"><img src="/images/toolkit.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算工作流——Atomate2自定义工作流"/></a><div class="content"><a class="title" href="/2024/11/10/Atomate2-3/" title="计算工作流——Atomate2自定义工作流">计算工作流——Atomate2自定义工作流</a><time datetime="2024-11-09T16:00:00.000Z" title="发表于 2024-11-10 00:00:00">2024-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/09/Atomate2-2/" title="计算工作流——Atomate2基本设置"><img src="/images/toolkit.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算工作流——Atomate2基本设置"/></a><div class="content"><a class="title" href="/2024/11/09/Atomate2-2/" title="计算工作流——Atomate2基本设置">计算工作流——Atomate2基本设置</a><time datetime="2024-11-08T16:00:00.000Z" title="发表于 2024-11-09 00:00:00">2024-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/08/Atomate2-1/" title="计算工作流——初识Atomate2"><img src="/images/toolkit.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算工作流——初识Atomate2"/></a><div class="content"><a class="title" href="/2024/11/08/Atomate2-1/" title="计算工作流——初识Atomate2">计算工作流——初识Atomate2</a><time datetime="2024-11-07T16:00:00.000Z" title="发表于 2024-11-08 00:00:00">2024-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/19/Learn-VASP-from-pymatgen-16/" title="Chap.16  计算小白硬学VASP —— 各类结构“Transformation”使用说明（三）"><img src="/images/wallhaven-gpkd77_3840x2160.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Chap.16  计算小白硬学VASP —— 各类结构“Transformation”使用说明（三）"/></a><div class="content"><a class="title" href="/2024/08/19/Learn-VASP-from-pymatgen-16/" title="Chap.16  计算小白硬学VASP —— 各类结构“Transformation”使用说明（三）">Chap.16  计算小白硬学VASP —— 各类结构“Transformation”使用说明（三）</a><time datetime="2024-08-18T16:00:00.000Z" title="发表于 2024-08-19 00:00:00">2024-08-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By 炫酷老司机</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.3</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'

  const disqusReset = conf => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: conf
    })
  }

  const loadDisqus = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyDisqus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    window.disqus_identifier = isShuoshuo ? path : '/2024/06/20/Pyprocar-tutorial-1/'
    window.disqus_url = isShuoshuo ? location.origin + path : 'https://www.withox.cn/2024/06/20/Pyprocar-tutorial-1/'

    const disqus_config = function () {
      this.page.url = disqus_url
      this.page.identifier = disqus_identifier
      this.page.title = '计算工具系列 —— Pyprocar库'
    }

    if (window.DISQUS) disqusReset(disqus_config)
    else {
      const script = document.createElement('script')
      script.src = 'https://withox.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }

    btf.addGlobalFn('themeChange', () => disqusReset(disqus_config), 'disqus')
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=withox&api_key=DWyqGL5cMyR3GQM0HJ9geFGLm1fXauiVcqcbmKnV6F73VtpmV4M0m0hiRDS1v82w&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if (isShuoshuo) {
    'Disqus' === 'Disqus'
      ? window.shuoshuoComment = { loadComment: loadDisqus }
      : window.loadOtherComment = loadDisqus
    return
  }

  if ('Disqus' === 'Disqus' || !false) {
    if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>